<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="myApp">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>4.4 - watch</title>
	</head>
	<body>
		<div ng-controller="MyController">
			<input type="text"ng-model="total" />
			<button ng-click="increment()">Incrementar total pelo Controller</button>
			<br />
			<hr />
			<span>{{total}}</span>
			<hr />
			<b>$watch listener = {{listenerMessage}}</b>
		</div>
		<!-- SCRIPTS -->
		<script type="text/javascript" src="assets/js/libs/angular.min.js"></script>
		<script type="text/javascript">
			var app = angular.module('myApp', []);

			app.controller('MyController', ['$scope', function($scope){
				$scope.total = 0;
				$scope.listenerMessage = '';

				function totalChanged(newValue, oldValue){
					$scope.listenerMessage = 'Valor Antigo: ' + oldValue + ', Novo valor: ' + newValue;
				}

				//Observa alterações de $scope.total
				$scope.$watch('total', totalChanged);
				$scope.increment = function(){
					$scope.total++;
				}
			}]);
		</script>
	</body>
</html>